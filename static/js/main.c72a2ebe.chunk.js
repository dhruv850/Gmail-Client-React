(this["webpackJsonpreact-gmail-api"]=this["webpackJsonpreact-gmail-api"]||[]).push([[0],{118:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(22),l=a.n(o),i=a(16),c=a(12),s=a(43),u=a(72),m=a(123),d=a(131),p=a(59),f=a(132),g=a(76),b=a(53),y=a(124),E=a(6),v=a(125),h=a(137),C=a(134),w=a(83),x=a(40),O=a(31),j=a.n(O),T=function(){var e,t=Object(n.useState)([]),a=Object(c.a)(t,2),o=a[0],l=a[1],s=Object(n.useState)(!1),O=Object(c.a)(s,2),T=(O[0],O[1]),I=Object(m.a)(),S=I.isOpen,R=I.onOpen,A=I.onClose,k=Object(d.a)(),M=function(e,t,a){var n=['Content-Type: multipart/mixed; boundary="my_boundary"',"MIME-Version: 1.0"];for(var r in e)n.push("".concat(r,": ").concat(e[r]));if(n.push("","--my_boundary"),/^\s*$/.test(t)||n.push('Content-Type: text/plain; charset="UTF-8"',"MIME-Version: 1.0","Content-Transfer-Encoding: 7bit","","".concat(t),"","--my_boundary"),o.length>0)for(var i=0;i<o.length;i++)n.push("Content-Type: ".concat(o[i].type),"MIME-Version: 1.0","Content-Transfer-Encoding: base64",'Content-Disposition: attachment; filename="'.concat(o[i].name,'"'),"",btoa(o[i].blob),"","--my_boundary");var c;c=n.join("\r\n")+"--",n=btoa(unescape(encodeURIComponent(c))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");var s=window.gapi.client.gmail.users.messages.send({userId:"me",resource:{raw:n}});l([]),s.execute(a)},z=function(e){-1!==e.result.labelIds.indexOf("SENT")?k({title:"Message Sent.",description:"We've Sent your email.",status:"success",duration:9e3,isClosable:!0}):k({title:"An error occurred.",description:"Unable to sent your email.",status:"error",duration:9e3,isClosable:!0})};return r.a.createElement(n.Fragment,null,r.a.createElement(p.a,{w:"100%",h:"48px",leftIcon:u.a,borderRadius:"20px",variant:"solid",variantColor:"blue",onClick:R},"New Message"),r.a.createElement(f.a,{isOpen:S,size:"full",onClose:A,closeOnOverlayClick:!1,padding:"10px 10px 10px 10px"},r.a.createElement(f.g,null),r.a.createElement(f.d,null,r.a.createElement(f.f,null,"New Message"),r.a.createElement(f.c,null),r.a.createElement("form",{id:"form",onSubmit:function(e){e.preventDefault();var t=e.target,a=t.elements.emailTo.value,n=t.elements.subject.value,r=t.elements.message.value;M({To:a,Subject:n},r,z,o),A()}},r.a.createElement(f.b,null,r.a.createElement(g.a,{isRequired:!0},r.a.createElement(b.a,{type:"email",id:"emailTo",placeholder:"To","aria-describedby":"email-helper-text"})),r.a.createElement(g.a,{isRequired:!0},r.a.createElement(b.a,{type:"text",id:"subject",placeholder:"Subject","aria-describedby":"subject-email-helper-text"})),r.a.createElement(g.a,{isRequired:!0},r.a.createElement(y.a,{id:"message",minH:"280px",size:"xl",resize:"vertical"})),r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(x.a,{disableClick:!0,style:{position:"relative"},onDrop:function(e){T({dropzoneActive:!1});for(var t=function(t){var a=new FileReader;a.onload=function(){l((function(n){return[].concat(Object(i.a)(n),[{name:e[t].name,size:e[t].size,type:e[t].type,blob:a.result}])}))},a.readAsBinaryString(e[t])},a=0;a<e.length;a++)t(a)},onDragEnter:function(){return T({dropzoneActive:!0})},onDragLeave:function(){return T({dropzoneActive:!1})},ref:function(t){e=t}},o.length>0?"":r.a.createElement("div",{style:{position:"absolute",top:0,right:0,bottom:0,left:0,padding:"2.5em 0",textAlign:"center"}},"You can also Drop Files Here")))),r.a.createElement(C.a,null,r.a.createElement(v.a,{fontSize:"xl"},"Attachments:"),r.a.createElement(E.a,{marginTop:"10px"},o.map((function(e,t){return r.a.createElement(v.a,{as:"ins",marginTop:"3px"},r.a.createElement(w.a,{key:t,listItem:!0},e.name," (",j()(e.size),")",r.a.createElement(p.a,{onClick:function(){return function(e){l(o.filter((function(t){return t!==e})))}(e)},className:"btn-link badge close"},"\xd7")))}))))),r.a.createElement(f.e,null,r.a.createElement(p.a,{variantColor:"blue",mr:3,variant:"outline",onClick:function(){e.open()}},"Attach Files"),r.a.createElement(p.a,{type:"reset",variantColor:"blue",mr:3,onClick:A},"Close"),r.a.createElement(p.a,{type:"submit",variantColor:"green"},"Send"))))))},I=a(4),S=a.n(I),R=a(126),A=a(20),k=a(57),M=function(e){var t=e.getMessages,a=e.resetstate,o=e.getMessagesQuery,l=Object(n.useState)("INBOX"),i=Object(c.a)(l,2),s=i[0],u=i[1],m=function(e){e.preventDefault();var n=e.target.id;u(n),a(),t(n)};return r.a.createElement(E.a,{w:"16%",h:"100%",bg:"white",border:"1px",borderColor:"gray.200",borderTopLeftRadius:"md",borderBottomLeftRadius:"md"},r.a.createElement(R.b,null,r.a.createElement(R.a,{p:"0.5rem 1rem 1rem"},r.a.createElement(T,null)),r.a.createElement(R.a,null,r.a.createElement(p.a,{id:"INBOX",w:"100%",h:"45px",py:2,pl:8,leftIcon:A.c,variantColor:"blue",variant:"INBOX"===s?"solid":"ghost",justifyContent:"flex-start",onClick:m},"Inbox"),r.a.createElement(R.a,null,r.a.createElement(p.a,{id:"is:unread",w:"100%",h:"45px",py:2,pl:8,leftIcon:A.h,variantColor:"blue",variant:"is:unread"===s?"solid":"ghost",justifyContent:"flex-start",onClick:function(e){e.preventDefault();var t=e.target.id;u(t),a(),o(t)}},"Unread"))),r.a.createElement(R.a,null,r.a.createElement(p.a,{id:"STARRED",w:"100%",h:"45px",py:2,pl:8,leftIcon:A.h,variantColor:"blue",variant:"STARRED"===s?"solid":"ghost",justifyContent:"flex-start",onClick:m},"Starred")),r.a.createElement(R.a,null,r.a.createElement(p.a,{id:"IMPORTANT",w:"100%",h:"45px",py:2,pl:8,leftIcon:A.d,variantColor:"blue",variant:"IMPORTANT"===s?"solid":"ghost",justifyContent:"flex-start",onClick:m},"Important")),r.a.createElement(R.a,null,r.a.createElement(p.a,{id:"SENT",w:"100%",h:"45px",py:2,pl:8,leftIcon:k.b,variantColor:"blue",variant:"SENT"===s?"solid":"ghost",justifyContent:"flex-start",onClick:m},"Sent")),r.a.createElement(R.a,null,r.a.createElement(p.a,{id:"DRAFT",w:"100%",h:"45px",py:2,pl:8,leftIcon:k.a,variantColor:"blue",variant:"DRAFT"===s?"solid":"ghost",justifyContent:"flex-start",onClick:m},"Drafts")),r.a.createElement(R.a,null,r.a.createElement(p.a,{id:"TRASH",w:"100%",h:"45px",py:2,pl:8,leftIcon:"delete",variantColor:"blue",variant:"TRASH"===s?"solid":"ghost",justifyContent:"flxex-start",onClick:m},"Trash")),r.a.createElement(R.a,null,r.a.createElement(p.a,{id:"CATEGORY_SOCIAL",w:"100%",h:"45px",py:2,pl:8,leftIcon:A.f,variantColor:"blue",variant:"CATEGORY_SOCIAL"===s?"solid":"ghost",justifyContent:"flxex-start",onClick:m},"Social")),r.a.createElement(R.a,null,r.a.createElement(p.a,{id:"CATEGORY_PROMOTIONS",w:"100%",h:"45px",py:2,pl:8,leftIcon:A.e,variantColor:"blue",variant:"CATEGORY_PROMOTIONS"===s?"solid":"ghost",justifyContent:"flxex-start",onClick:m},"Promotions"))))};M.prototype={getMessages:S.a.func.isRequired,resetstate:S.a.func.isRequired};var z=M,D=a(19),B=a(58),F=function(e,t){var a=e.find((function(e){return e.name===t}));return void 0!==a?a.value:void 0},q=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},N=function(e){return e.replace(/['"]+/g,"")},_=a(127),L=a(135),U=a(128),H=a(82),V=a(133),Y=function(e){var t,a=e.getOneMessage,o=e.messages,l=e.loadMore,i=e.getMessagesQuery,s=function(e){var t=e.currentTarget.getAttribute("id");a(t)},u=Object(n.useState)({query:""}),m=Object(c.a)(u,2),d=m[0],f=m[1],g=d.query;return r.a.createElement(_.a,{direction:"column",wrap:"no-wrap",w:"26%",h:"100%",bg:"#f1f1f1",color:"black"},r.a.createElement(E.a,{py:"5px",bg:"white",border:"1px",borderColor:"gray.200"},r.a.createElement(L.a,{size:"lg"},r.a.createElement(U.a,{variant:"outline",marginLeft:"5px",variantColor:"blue","aria-label":"Search database",icon:"search",onClick:function(){i(g),f({query:""})}}),r.a.createElement(b.a,{type:"text",marginLeft:"5px",placeholder:"Search mail",borderWidth:"0px",borderRadius:"0px",focusBorderColor:"white",onChange:(t="query",function(e){f(Object(B.a)(Object(B.a)({},d),{},Object(D.a)({},t,e.target.value)));var a=e.target.value;console.log(a)}),value:g}))),q(o)?r.a.createElement(E.a,{mt:6,display:"flex",align:"center",justifyContent:"center"},r.a.createElement(H.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"})):r.a.createElement(E.a,{overflowY:"auto"},o.map((function(e){var t=N(F(e.payload.headers,"From").split("<")[0]),a=F(e.payload.headers,"Subject"),n=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}(e.snippet.substr(0,75)),o=e.labelIds.indexOf("UNREAD")>-1?"#fff":"#E2E8F0";return r.a.createElement(_.a,{key:e.id,id:e.id,onClick:s,wrap:"no-wrap",justify:"space-around",py:2,bg:o,borderTop:"1px",borderBottom:"1px",borderColor:"gray.300",cursor:"pointer"},r.a.createElement(V.a,{name:t,src:"https://bit.ly/tioluwani-kolawole"}),r.a.createElement(E.a,{w:"80%"},r.a.createElement(v.a,{fontSize:"sm",color:"gray.700",isTruncated:!0},t),r.a.createElement(v.a,{fontSize:"md",fontWeight:"bold",color:"#3182ce",isTruncated:!0},a),r.a.createElement(v.a,{fontSize:"xs",color:"gray.500"},n)))})),r.a.createElement(p.a,{width:"100%",variantColor:"teal",variant:"outline",onClick:function(){return l()}},"Load More...")))},P=Y;Y.prototype={getOneMessage:S.a.func.isRequired,messages:S.a.array.isRequired};var G=function(e){var t,a=e.replayData,o=Object(n.useState)([]),l=Object(c.a)(o,2),s=l[0],u=l[1],O=Object(n.useState)(!1),T=Object(c.a)(O,2),I=(T[0],T[1]),S=Object(m.a)(),R=S.isOpen,k=S.onOpen,M=S.onClose,z=Object(d.a)(),D=function(e,t,a){var n=['Content-Type: multipart/mixed; boundary="my_boundary"',"MIME-Version: 1.0"];for(var r in e)n.push("".concat(r,": ").concat(e[r]));if(n.push("","--my_boundary"),/^\s*$/.test(t)||n.push('Content-Type: text/plain; charset="UTF-8"',"MIME-Version: 1.0","Content-Transfer-Encoding: 7bit","","".concat(t),"","--my_boundary"),s.length>0)for(var o=0;o<s.length;o++)n.push("Content-Type: ".concat(s[o].type),"MIME-Version: 1.0","Content-Transfer-Encoding: base64",'Content-Disposition: attachment; filename="'.concat(s[o].name,'"'),"",btoa(s[o].blob),"","--my_boundary");var l;l=n.join("\r\n")+"--",n=btoa(unescape(encodeURIComponent(l))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");var i=window.gapi.client.gmail.users.messages.send({userId:"me",resource:{raw:n}});u([]),i.execute(a)},B=function(e){-1!==e.result.labelIds.indexOf("SENT")?z({title:"Message Sent.",status:"success",duration:3e3,isClosable:!0}):z({title:"An error occurred.",description:"Unable to sent your replay.",status:"error",duration:3e3,isClosable:!0})};return r.a.createElement(n.Fragment,null,r.a.createElement(p.a,{rightIcon:A.g,variantColor:"blue",variant:"outline",onClick:k},"Reply"),r.a.createElement(f.a,{isOpen:R,size:"full",onClose:M,closeOnOverlayClick:!1},r.a.createElement(f.g,null),r.a.createElement(f.d,null,r.a.createElement(f.f,null,"Reply Email "),r.a.createElement(f.c,null),r.a.createElement("form",{id:"form",onSubmit:function(e){e.preventDefault();var t=e.target,a=t.elements.emailTo.value,n=t.elements.subject.value,r=t.elements["reply-message-id"].value,o=t.elements.message.value;D({To:a,Subject:n,"In-Reply-To":r},o,B,s),M()}},r.a.createElement(f.b,null,r.a.createElement(b.a,{type:"hidden",id:"reply-message-id",value:a.msgId,readOnly:!0}),r.a.createElement(g.a,{isRequired:!0},r.a.createElement(b.a,{type:"email",id:"emailTo",placeholder:"To","aria-describedby":"email-helper-text",value:a.to,readOnly:!0})),r.a.createElement(g.a,{isRequired:!0},r.a.createElement(b.a,{type:"text",id:"subject",placeholder:"Subject","aria-describedby":"subject-email-helper-text",value:a.subject,readOnly:!0})),r.a.createElement(g.a,{isRequired:!0},r.a.createElement(y.a,{id:"message",minH:"280px",size:"xl",resize:"vertical"})),r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(x.a,{disableClick:!0,style:{position:"relative"},onDrop:function(e){I({dropzoneActive:!1});for(var t=function(t){var a=new FileReader;a.onload=function(){u((function(n){return[].concat(Object(i.a)(n),[{name:e[t].name,size:e[t].size,type:e[t].type,blob:a.result}])}))},a.readAsBinaryString(e[t])},a=0;a<e.length;a++)t(a)},onDragEnter:function(){return I({dropzoneActive:!0})},onDragLeave:function(){return I({dropzoneActive:!1})},ref:function(e){t=e}},s.length>0?"":r.a.createElement("div",{style:{position:"absolute",top:0,right:0,bottom:0,left:0,padding:"2.5em 0",textAlign:"center"}},"You can also Drop Files Here")))),r.a.createElement(C.a,null,r.a.createElement(v.a,{fontSize:"xl"},"Attachments:"),r.a.createElement(E.a,{marginTop:"10px"},s.map((function(e,t){return r.a.createElement(v.a,{as:"ins",marginTop:"3px"},r.a.createElement(w.a,{key:t,listItem:!0},e.name," (",j()(e.size),")",r.a.createElement(p.a,{onClick:function(){return function(e){u(s.filter((function(t){return t!==e})))}(e)},className:"btn-link badge close"},"\xd7")))}))))),r.a.createElement(f.e,null,r.a.createElement(p.a,{variantColor:"blue",mr:3,variant:"outline",onClick:function(){t.open()}},"Attach Files"),r.a.createElement(p.a,{type:"reset",variantColor:"blue",mr:3,onClick:M},"Close"),r.a.createElement(p.a,{type:"submit",variantColor:"green"},"Send"))))))},X=G;G.prototype={replayData:S.a.object.isRequired};var $=function(e){var t,a=e.forwardData,o=e.getMessageBody,l=Object(n.useState)([]),s=Object(c.a)(l,2),u=s[0],O=s[1],T=Object(n.useState)(!1),I=Object(c.a)(T,2),S=(I[0],I[1]),R=Object(m.a)(),k=R.isOpen,M=R.onOpen,z=R.onClose,D=Object(d.a)(),B=function(e,t,a){console.log(u);var n=['Content-Type: multipart/mixed; boundary="my_boundary"',"MIME-Version: 1.0"];for(var r in e)console.log(e),n.push("".concat(r,": ").concat(e[r]));if(n.push("","--my_boundary"),/^\s*$/.test(t)||n.push('Content-Type: text/html; charset="UTF-8"',"MIME-Version: 1.0","Content-Transfer-Encoding: 7bit","","".concat(t),"","--my_boundary"),u.length>0)for(var o=0;o<u.length;o++)n.push("Content-Type: ".concat(u[o].type),"MIME-Version: 1.0","Content-Transfer-Encoding: base64",'Content-Disposition: attachment; filename="'.concat(u[o].name,'"'),"",btoa(u[o].blob),"","--my_boundary");var l;l=n.join("\r\n")+"--",n=btoa(unescape(encodeURIComponent(l))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");var i=window.gapi.client.gmail.users.messages.send({userId:"me",resource:{raw:n}});O([]),i.execute(a)},q=function(e){-1!==e.result.labelIds.indexOf("SENT")?D({title:"Message Sent.",status:"success",duration:3e3,isClosable:!0}):D({title:"An error occurred.",description:"Unable to sent your replay.",status:"error",duration:3e3,isClosable:!0})};return r.a.createElement(n.Fragment,null,r.a.createElement(p.a,{rightIcon:A.b,variantColor:"blue",variant:"outline",onClick:M},"Forward"),r.a.createElement(f.a,{isOpen:k,size:"full",onClose:z,closeOnOverlayClick:!1},r.a.createElement(f.g,null),r.a.createElement(f.d,null,r.a.createElement(f.f,null,"Reply Email "),r.a.createElement(f.c,null),r.a.createElement("form",{id:"form",onSubmit:function(e){e.preventDefault();var t=e.target,n=t.elements.emailTo.value,r=t.elements.subject.value;B({To:n,Subject:r},o(a.payload),q),z()}},r.a.createElement(f.b,null,r.a.createElement(g.a,{isRequired:!0},r.a.createElement(b.a,{marginTop:"10px",type:"email",id:"emailTo",placeholder:"To","aria-describedby":"email-helper-text"})),r.a.createElement(g.a,{isRequired:!0},r.a.createElement(b.a,{marginTop:"10px",type:"text",id:"subject",placeholder:"Subject","aria-describedby":"subject-email-helper-text",value:F(a.payload.headers,"Subject"),readOnly:!0})),r.a.createElement(g.a,{isRequired:!0},r.a.createElement(y.a,{id:"message",minH:"280px",size:"xl",resize:"vertical",value:"------Forward Message------\r\n"+function(e){var t="";return t+="From: "+F(e,"From")+"\r\n",t+="Date: "+F(e,"Date")+"\r\n",t+="Subject: "+F(e,"Subject")+"\r\n",t+="To: "+F(e,"To")+"\r\n"}(a.payload.headers),readOnly:!0})),r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(x.a,{disableClick:!0,style:{position:"relative"},onDrop:function(e){S({dropzoneActive:!1});for(var t=function(t){var a=new FileReader;a.onload=function(){O((function(n){return[].concat(Object(i.a)(n),[{name:e[t].name,size:e[t].size,type:e[t].type,blob:a.result}])}))},a.readAsBinaryString(e[t])},a=0;a<e.length;a++)t(a)},onDragEnter:function(){return S({dropzoneActive:!0})},onDragLeave:function(){return S({dropzoneActive:!1})},ref:function(e){t=e}},u.length>0?"":r.a.createElement("div",{style:{position:"absolute",top:0,right:0,bottom:0,left:0,padding:"2.5em 0",textAlign:"center"}},"You can also Drop Files Here")))),r.a.createElement(C.a,null,r.a.createElement(v.a,{fontSize:"xl"},"Attachments:"),r.a.createElement(E.a,{marginTop:"10px"},u.map((function(e,t){return r.a.createElement(v.a,{as:"ins",marginTop:"3px"},r.a.createElement(w.a,{key:t,listItem:!0},e.name," (",j()(e.size),")",r.a.createElement(p.a,{onClick:function(){return function(e){O(u.filter((function(t){return t!==e})))}(e)},className:"btn-link badge close"},"\xd7")))}))))),r.a.createElement(f.e,null,r.a.createElement(p.a,{variantColor:"blue",mr:3,variant:"outline",onClick:function(){t.open()}},"Attach Files"),r.a.createElement(p.a,{type:"reset",variantColor:"blue",mr:3,onClick:z},"Close"),r.a.createElement(p.a,{type:"submit",variantColor:"green"},"Send"))))))},K=$;$.prototype={forwardData:S.a.object.isRequired,getMessageBody:S.a.func.isRequired};var W=a(129),Q=a(130),J=a(80),Z=function(e){var t=e.message,a=q(t)?[]:t.payload.headers,o=Object(d.a)();r.a.useEffect((function(){q(t)||l(t)}),[t]);var l=function(e){document.getElementById("iframe").contentWindow.document.body.innerHTML=i(e.payload)},i=function(e){var t="undefined"===typeof e.parts?e.body.data:c(e.parts);return s.Base64.decode(t)},c=function e(t){for(var a="",n="",r=0;r<t.length;r++){if("undefined"!==typeof t[r].parts)return e(t[r].parts);"text/html"===t[r].mimeType?a=t[r].body.data:"text/plain"===t[r].mimeType&&(n=t[r].body.data)}return""!==a?a:n};return r.a.createElement(_.a,{direction:"column",wrap:"no-wrap",w:"58%",h:"100%",p:"0.6rem 1rem",bg:"white",color:"black",border:"1px",borderColor:"gray.200",borderTopRightRadius:"md",borderBottomRightRadius:"md"},!q(t)&&r.a.createElement(n.Fragment,null,r.a.createElement(_.a,{justify:"space-around",wrap:"no-wrap",mb:2},r.a.createElement(X,{replayData:function(e){var t=void 0!==F(e,"Reply-to")?F(e,"Reply-to"):F(e,"From"),a=F(e,"Subject"),n=F(e,"Message-ID");return{to:"".concat(t),subject:"Re: ".concat(a),msgId:"".concat(n)}}(a)}),r.a.createElement(K,{forwardData:t,getMessageBody:i,getAttachments:function(e){var t=[];if("undefined"!==typeof e.payload.parts)for(var a=0;a<e.payload.parts.length;a++){var n=e.payload.parts[a];"undefined"!==typeof n.body.attachmentId&&t.push(n)}return t}}),r.a.createElement(p.a,{rightIcon:A.a,variantColor:"blue",variant:"outline",onClick:function(){return e=[t.id],a=["INBOX"],window.gapi.client.gmail.users.messages.batchModify({userId:"me",resource:{ids:e,removeLabelIds:a}}).then((function(e){204===e.status&&o({title:"Message Archived",description:"The Message is now in archive category.",status:"success",duration:3e3,isClosable:!0})})).catch((function(e){console.log("error: ",e),o({title:"An error occurred.",description:"Unable to Archive Message.",status:"error",duration:3e3,isClosable:!0})}));var e,a}},"Archive"),r.a.createElement(p.a,{rightIcon:"delete",variantColor:"blue",variant:"outline",onClick:function(){return e="me",a=t.id,window.gapi.client.gmail.users.messages.trash({userId:e,id:a}).then((function(e){200===e.status&&o({title:"Message Deleted",status:"error",duration:3e3,isClosable:!0})})).catch((function(e){console.log("error: ",e),o({title:"An error occurred.",description:"Unable to Delete Message.",status:"warning",duration:3e3,isClosable:!0})}));var e,a}},"Delete")),r.a.createElement(_.a,{className:"mailContainer",flexGrow:"2",direction:"column",wrap:"wrap",p:2},r.a.createElement(E.a,{wordBreak:"break-word",className:"mailHeader",mb:2},r.a.createElement(v.a,{fontSize:"lg",fontWeight:"bold",color:"gray.700",mb:1},F(a,"Subject")),r.a.createElement(_.a,{wrap:"wrap",justify:"flex-start"},r.a.createElement(V.a,{name:N(F(a,"From").split("<")[0]),src:"https://bit.ly/tioluwani-kolawole",mr:4}),r.a.createElement(E.a,{w:"80%"},r.a.createElement(v.a,{fontSize:"md",color:"gray.700"},F(a,"From")),r.a.createElement(v.a,{fontSize:"sm",color:"gray.500"},function(e){var t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(t)}(F(a,"Date"))))),r.a.createElement(v.a,{fontSize:"sm",color:"gray.700",mt:1},"To: ".concat(F(a,"To")))),r.a.createElement(E.a,{className:"mailBody",flexGrow:"2"},r.a.createElement(W.a,{ratio:16/9,h:"100%"},r.a.createElement(E.a,{as:"iframe",id:"iframe",title:"messageBody"},r.a.createElement("p",null,"Your browser does not support iframes."))))),!q(t),r.a.createElement(E.a,{marginBottom:"50px",bg:"white",color:"black",border:"1px",borderColor:"gray.200",borderTopRightRadius:"md",borderBottomRightRadius:"md"},t.payload.parts&&t.payload.parts.length>0?t.payload.parts.length?r.a.createElement(v.a,{fontSize:"xl"},r.a.createElement(Q.a,{vertical:!0},t.payload.parts.slice(1).map((function(e,a){return e.filename?r.a.createElement(p.a,{rightIcon:"download",marginBottom:"10px",variantColor:"blue",variant:"outline",key:a,onClick:function(){return function(e,t){window.gapi.client.gmail.users.messages.attachments.get({userId:"me",messageId:e,id:t.body.attachmentId}).execute((function(e){for(var a=atob(e.data.replace(/-/g,"+").replace(/_/g,"/")),n=new ArrayBuffer(a.length),r=new Uint8Array(n),o=0;o<a.length;o++)r[o]=a.charCodeAt(o);var l=new Blob([r],{type:t.mimeType});Object(J.saveAs)(l,t.filename)}))}(t.id,e)}},e.filename,"(",j()(e.body.size),")"):null})))):null:"")))},ee=Z;Z.prototype={message:S.a.object.isRequired};var te=a(13),ae=a(136),ne=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)({}),s=Object(c.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)(30),f=Object(c.a)(d,2),g=f[0],b=f[1],y=Object(n.useState)("INBOX"),E=Object(c.a)(y,2),v=E[0],h=E[1];Object(n.useEffect)((function(){window.gapi.load("client:auth2",{callback:function(){window.gapi.client.setApiKey("AIzaSyCvKt6TKxPAALex02mS_kGI7lKX0azvKfI"),window.gapi.auth.authorize({client_id:"504410649086-ltbq2ok0im8rp9l838nspiig3gnqnn7n.apps.googleusercontent.com",scope:"https://mail.google.com/",immediate:!0},C)},onerror:function(){console.log("gapi.client failed to load!")},timeout:5e3,ontimeout:function(){console.log("gapi.client could not load in a timely manner!")}})}),[]);var C=function(e){e&&!e.error?(w(),O()):(console.error("handleAuthResult..."),console.error(e),x())},w=function(){document.getElementById("authBtn").style.display="none"},x=function(){document.getElementById("authBtn").style.display="block"},O=function(){return window.gapi.client.load("gmail","v1").then((function(e){j()}),(function(e){console.error("Error loading window.gapi client for API",e)}))},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"INBOX",t=window.gapi.client.gmail.users.messages.list({userId:"me",labelIds:e,maxResults:g});v!=e&&b(30),h(e),o([]),t.execute(T)},T=function(e){(e.result.messages?e.result.messages:[]).forEach((function(e){window.gapi.client.gmail.users.messages.get({userId:"me",id:e.id}).then((function(e){o((function(t){return[].concat(Object(i.a)(t),[e.result])}))}),(function(e){console.error("getMessagesData error",e)}))}))},I=function(e){var t=window.gapi.client.gmail.users.messages.list({userId:"me",q:e});o([]),t.execute(T)};return r.a.createElement(n.Fragment,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,null),r.a.createElement(p.a,{id:"authBtn",display:"none",variantColor:"teal",variant:"outline",onClick:function(){return window.gapi.auth.authorize({client_id:"504410649086-ltbq2ok0im8rp9l838nspiig3gnqnn7n.apps.googleusercontent.com",scope:"https://mail.google.com/",immediate:!1},C)}},"Authorize"),r.a.createElement(_.a,{h:"100vh",minH:"600px",justify:"space-arround",wrap:"no-wrap",p:"1em",bg:"#e5f4f1",color:"white"},r.a.createElement(z,{getMessages:j,resetstate:function(){b(30),console.log("it is reset"+g)},getMessagesQuery:I}),r.a.createElement(P,{getOneMessage:function(e){window.gapi.client.gmail.users.messages.get({userId:"me",id:e}).then((function(t){m(t.result),function(e){window.gapi.client.gmail.users.messages.modify({userId:"me",id:e,resource:{addLabelIds:[],removeLabelIds:["UNREAD"]}}).execute()}(e)}),(function(e){console.error("getMessage error",e)}))},loadMore:function(){b(g+20),j(v)},messages:a,getMessagesQuery:I}),r.a.createElement(ee,{message:u}))))};l.a.render(r.a.createElement(ne,null),document.getElementById("root"))},85:function(e,t,a){e.exports=a(118)}},[[85,1,2]]]);
//# sourceMappingURL=main.c72a2ebe.chunk.js.map